<style>
  button {
  margin: 5px
}
</style>
<h1>Angular Nested FormArray / Dynamic FormArray</h1>
<form [formGroup]="empForm" (ngSubmit)="onSubmit()">
  <div formArrayName="employees">
    @for (employee of getAllEmployees().controls; track employee; let empIndex = $index) {
      <div>
        <div [formGroupName]="empIndex" style="border: 3px solid blue; padding: 10px; width: 700px; margin: 10px;">
          {{empIndex}} First Name :
          <input type="text" formControlName="firstName" />
          Last Name:
          <input type="text" formControlName="lastName" />
          <button (click)="removeEmployee(empIndex)">Remove</button>
          <div formArrayName="skills">
            @for (skill of employeeSkills(empIndex).controls; track skill; let skillIndex = $index) {
              <div>
                <div [formGroupName]="skillIndex">
                  {{skillIndex}} Skill :
                  <input type="text" formControlName="skill" />
                  Exp:
                  <input type="text" formControlName="exp" />
                  <button (click)="removeEmployeeSkill(empIndex,skillIndex)">
                    X
                  </button>
                </div>
              </div>
            }
          </div>
          <button type="button" (click)="addEmployeeSkill(empIndex)">
            Add Skill
          </button>
        </div>
      </div>
    }
    <button type="button" (click)="addEmployee()">Add Employee</button>
  </div>
</form>

<pre>{{this.empForm.value | json}}</pre>
